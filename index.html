<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Riyerikan</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            /* Fixes the highlighting/selection issue */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        #main-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            transition: opacity 1s ease;
        }
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        .bubble {
            background: #262629;
            padding: 16px 20px;
            border-radius: 20px;
            max-width: 85%;
            font-size: 1.1rem;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        .ios-btn {
            width: 100%;
            max-width: 280px;
            padding: 18px;
            border-radius: 14px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 15px;
        }
        #fake-btn { background: #fff; color: #000; }
        #real-btn { background: rgba(255, 255, 255, 0.1); color: #555; border: 1px solid #333; }
        
        #year-display {
            font-size: 6rem;
            font-weight: 100;
            color: rgba(255,255,255,0.1);
            position: absolute;
            pointer-events: none; /* Prevents clicking/highlighting the year */
        }
        #thought-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .envelope-text {
            font-family: "Times New Roman", serif;
            font-size: 1.4rem;
            line-height: 1.6;
            text-align: center;
            max-width: 90%;
            transition: all 0.8s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        .envelope-text.active {
            opacity: 1;
            transform: translateY(0);
        }
        .tap-hint {
            position: absolute;
            bottom: 40px;
            font-size: 0.7rem;
            color: #444;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<div id="main-container">
    <div id="view-1" class="view">
        <div style="width: 100%; max-width: 400px;">
            <div style="font-size: 0.8rem; color: #8e8e93; margin-bottom: 5px; margin-left: 10px;">Joy</div>
            <div class="bubble">I love you</div>
            <div style="margin-top: 40px; display: flex; flex-direction: column; align-items: center;">
                <button id="real-btn" class="ios-btn">I love you too</button>
                <button id="fake-btn" class="ios-btn">It's just lust</button>
            </div>
        </div>
    </div>

    <div id="view-2" class="view hidden">
        <div id="year-display">2022</div>
        <canvas id="thought-canvas"></canvas>
        <div style="position: absolute; bottom: 80px; color: #444; font-size: 0.8rem;">HOLD TO REFLECT</div>
    </div>

    <div id="view-3" class="view hidden">
        <div id="message-target" class="envelope-text"></div>
        <div class="tap-hint">Tap to continue</div>
    </div>
</div>

<script>
    const realBtn = document.getElementById('real-btn');
    const fakeBtn = document.getElementById('fake-btn');
    const view1 = document.getElementById('view-1');
    const view2 = document.getElementById('view-2');
    const view3 = document.getElementById('view-3');
    const yearDisplay = document.getElementById('year-display');
    const canvas = document.getElementById('thought-canvas');
    const ctx = canvas.getContext('2d');
    const messageTarget = document.getElementById('message-target');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const phrases = [
        "Why did I lie?",
        "Ina fatan tana lafiya.",
        "I'm surrounded by people but I'm only looking for you",
        "I loved the soul God put in you.",
        "Why didn't I just say the truth?",
        "The way you speak Hausa...",
        "Every atom is waiting.",
        "I loved you then. I just didn't want to admit it.",
        "Is she laughing right now?",
        "It was never a phase.",
        "Zuciyata ba ta karya take yi ba.",
        "I loved your soul, not just your flesh."
    ];

    const confessionSteps = [
        "I love you and every atom in my body, every fiber loves you.",
        "I loved everything about you from the way you talk to the way you laugh, to the way you speak Hausa.",
        "I meant this in every way. I didn't just love your flesh, I loved the soul God put in youâ€”it was so pure and natural.",
        "I never wanted you to be out of my life, even if you wanted to push me away, I'll always come back.",
        "My love for you isn't a phase neither is it a 'to' cause this 'to' shall not pass away.",
        "I hear a song and I think about you. I watch a movie and I think about you. I see an old couple and I think about you.",
        "I see your text message and I use over an hour to wonder what I should reply to it with...",
        "Not out of confusion, but out of respect and the perfection I see in you.",
        "You are my everlasting twin flame that will keep burning.",
        "Eventually someday I'll meet you, and on one knee will I go down.",
        "<span style='color:#ff3b30; font-weight:bold; font-size:2rem;'>Zuciyata tana bugawa gareki.</span>"
    ];

    realBtn.addEventListener('touchstart', (e) => {
        e.preventDefault();
        realBtn.style.position = 'fixed';
        realBtn.style.left = Math.random() * (window.innerWidth - 150) + 'px';
        realBtn.style.top = Math.random() * (window.innerHeight - 100) + 'px';
    });

    fakeBtn.addEventListener('click', () => {
        view1.classList.add('hidden');
        setTimeout(() => {
            view1.style.display = 'none';
            view2.classList.remove('hidden');
        }, 1000);
    });

    let holdActive = false;
    let year = 2022;
    let pArray = [];

    class P {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = canvas.height + 20;
            this.t = phrases[Math.floor(Math.random() * phrases.length)];
            this.o = 0;
            this.s = Math.random() * 1 + 0.5;
        }
        up() {
            this.y -= this.s;
            if (this.o < 0.5) this.o += 0.01;
        }
        draw() {
            ctx.fillStyle = `rgba(255,255,255,${this.o})`;
            ctx.font = '12px -apple-system';
            ctx.fillText(this.t, this.x, this.y);
        }
    }

    function loop() {
        if (!holdActive) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (Math.random() < 0.1) pArray.push(new P());
        pArray.forEach((p, i) => {
            p.up();
            p.draw();
            if (p.y < -50) pArray.splice(i, 1);
        });
        requestAnimationFrame(loop);
    }

    view2.addEventListener('touchstart', () => {
        holdActive = true;
        loop();
        yInt = setInterval(() => {
            if (year < 2026) {
                year++;
                yearDisplay.innerText = year === 2026 ? "December" : year;
            } else {
                clearInterval(yInt);
                toFinal();
            }
        }, 150);
    });

    view2.addEventListener('touchend', () => {
        holdActive = false;
        clearInterval(yInt);
    });

    function toFinal() {
        view2.classList.add('hidden');
        setTimeout(() => {
            view2.style.display = 'none';
            view3.classList.remove('hidden');
            showStep();
        }, 1000);
    }

    let currentStep = 0;
    function showStep() {
        if (currentStep < confessionSteps.length) {
            messageTarget.classList.remove('active');
            setTimeout(() => {
                messageTarget.innerHTML = confessionSteps[currentStep];
                messageTarget.classList.add('active');
                currentStep++;
            }, 500);
        }
    }

    view3.addEventListener('click', showStep);
</script>

</body>
</html>
